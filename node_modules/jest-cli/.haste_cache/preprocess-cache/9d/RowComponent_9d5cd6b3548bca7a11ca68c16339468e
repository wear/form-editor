var React = require('react');

var CodeComponent = React.createClass({displayName: "CodeComponent",
  render: function(){
    return (React.createElement("code", null, this.props.code))
  }
});

var ImageComponent = React.createClass({displayName: "ImageComponent",
  render: function(){
    return (React.createElement("p", null, this.props.src));
  }
});

var VideoComponent = React.createClass({displayName: "VideoComponent",
  render: function(){
    return (React.createElement("p", null, this.props.src));
  }
});

var AudioComponent = React.createClass({displayName: "AudioComponent",
  render: function(){
    return (React.createElement("p", null, this.props.src));
  }
});

var RowComponent = React.createClass({displayName: "RowComponent",
  propTypes: {
    lines: React.PropTypes.array.isRequired
  },
  render: function(){
    var parsedLines = this.props.lines.map(function(line, index){
      return compileLine(line, index);
    }, this)
    return (React.createElement("div", null, parsedLines));
  }
});

var compileLine = function(line, key){
  if((typeof line) === 'string'){
    return (React.createElement("p", {key: key}, line));
  } else {
    switch(line.tag){
      case 'code':
        return (React.createElement("code", {key: key}, line.body));
      case 'image':
        return React.createElement("image", {key: key, src: line.body})
      case 'video':
        return React.createElement(VideoComponent, {key: key, src: line.body})
      case 'audio':
        return React.createElement(AudioComponent, {key: key, src: line.body})
      default:
        // nope
    }
  }
}

module.exports = RowComponent;
